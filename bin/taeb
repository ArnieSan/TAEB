#!/usr/bin/env perl
use strict;
use warnings;
use lib 'lib';
use Getopt::Whatever;
use TAEB;
$| = 1;

# load_from_argv {{{
sub load_from_argv {
    my $second_level = shift;
    my $default = shift;
    my $arg_name = lc($second_level);

    my $third_level = $ARGV{$arg_name} || $default;
    my $type = "TAEB::${second_level}::$third_level";

    eval "require $type; 1"
        or die $@;

    return $type->new;
}
# }}}
my $interface = load_from_argv('Interface', 'Local');
my $brain     = load_from_argv('Brain', 'RandomWalk');

my $taeb = TAEB->new(interface => $interface, brain => $brain);
print $taeb->step while 1;

